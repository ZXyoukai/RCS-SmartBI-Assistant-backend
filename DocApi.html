<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Documentação da API - RCS SmartBI Assistant</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2rem; background: #f9f9f9; }
    h1, h2, h3 { color: #2c3e50; }
    code { background: #eee; padding: 2px 4px; border-radius: 4px; }
    pre { background: #f4f4f4; padding: 1em; border-radius: 6px; }
    section { margin-bottom: 2em; }
    .method { font-weight: bold; color: #2980b9; }
    .protected { color: #e67e22; font-size: 0.95em; }
    .public { color: #27ae60; font-size: 0.95em; }
  </style>
</head>
<body>
  <h1>Documentação da API - RCS SmartBI Assistant</h1>
  <p>API RESTful construída com Express e Prisma. Todas as rotas protegidas requerem autenticação via JWT no header <code>Authorization: Bearer &lt;token&gt;</code>.</p>

  <section>
    <h2>Autenticação</h2>
    <h3><span class="method">POST</span> /auth/register <span class="public">(Pública)</span></h3>
    <p>Registra um novo usuário.</p>
    <pre>
{
  "name": "Nome",
  "email": "email@exemplo.com",
  "password": "senha"
}
    </pre>
    <h3><span class="method">POST</span> /auth/login <span class="public">(Pública)</span></h3>
    <p>Autentica um usuário e retorna um token JWT.</p>
    <pre>
{
  "email": "email@exemplo.com",
  "password": "senha"
}
    </pre>
    <p><b>Resposta:</b> <code>{ "token": "..." }</code></p>
  </section>

  <section>
    <h2>Usuários</h2>
    <h3><span class="method">GET</span> /users <span class="protected">(Protegida)</span></h3>
    <p>Lista todos os usuários.</p>
    <h3><span class="method">GET</span> /users/:id <span class="protected">(Protegida)</span></h3>
    <p>Obtém detalhes de um usuário.</p>
    <h3><span class="method">PUT</span> /users/:id <span class="protected">(Protegida)</span></h3>
    <p>Atualiza dados do usuário.</p>
    <h3><span class="method">DELETE</span> /users/:id <span class="protected">(Protegida)</span></h3>
    <p>Remove um usuário.</p>
  </section>

  <section>
    <h2>Queries</h2>
    <h3><span class="method">GET</span> /queries <span class="protected">(Protegida)</span></h3>
    <p>Lista todas as queries do usuário autenticado.</p>
    <h3><span class="method">POST</span> /queries <span class="protected">(Protegida)</span></h3>
    <p>Cria uma nova query.</p>
    <pre>
{
  "question_text": "Sua pergunta aqui"
}
    </pre>
    <h3><span class="method">GET</span> /queries/:id <span class="protected">(Protegida)</span></h3>
    <p>Detalhes de uma query.</p>
    <h3><span class="method">DELETE</span> /queries/:id <span class="protected">(Protegida)</span></h3>
    <p>Remove uma query.</p>
  </section>

  <section>
    <h2>Results</h2>
    <h3><span class="method">GET</span> /results?query_id=ID <span class="protected">(Protegida)</span></h3>
    <p>Lista resultados de uma query.</p>
    <h3><span class="method">POST</span> /results <span class="protected">(Protegida)</span></h3>
    <p>Adiciona resultado a uma query.</p>
    <pre>
{
  "query_id": 1,
  "result_type": "tipo",
  "content": { "dados": "..." }
}
    </pre>
  </section>

  <section>
    <h2>History</h2>
    <h3><span class="method">GET</span> /history <span class="protected">(Protegida)</span></h3>
    <p>Lista histórico do usuário autenticado.</p>
  </section>

  <section>
    <h2>Exports</h2>
    <h3><span class="method">GET</span> /exports <span class="protected">(Protegida)</span></h3>
    <p>Lista exports do usuário.</p>
    <h3><span class="method">POST</span> /exports <span class="protected">(Protegida)</span></h3>
    <p>Cria um novo export.</p>
    <pre>
{
  "file_type": "csv",
  "file_path": "/caminho/arquivo.csv"
}
    </pre>
  </section>

  <section>
    <h2>Sugestões</h2>
    <h3><span class="method">GET</span> /suggestions <span class="protected">(Protegida)</span></h3>
    <p>Lista sugestões do usuário.</p>
    <h3><span class="method">POST</span> /suggestions <span class="protected">(Protegida)</span></h3>
    <p>Cria uma sugestão.</p>
    <pre>
{
  "content": "Sugestão",
  "source": "origem"
}
    </pre>
  </section>

  <section>
    <h2>Logs de Acesso</h2>
    <h3><span class="method">GET</span> /access-logs <span class="protected">(Protegida)</span></h3>
    <p>Lista logs de acesso do usuário autenticado.</p>
  </section>

  <section>
    <h2>Autorização</h2>
    <p>Inclua o token JWT no header de cada requisição protegida:</p>
    <pre>
Authorization: Bearer SEU_TOKEN_AQUI
    </pre>
  </section>

  <footer>
    <hr>
    <p>Documentação gerada em agosto de 2025.</p>