# ğŸ¤– SmartBI Assistant - AnÃ¡lise de Dados com IA

Sistema de anÃ¡lise de dados que utiliza a API do Google Gemini para gerar insights estratÃ©gicos de negÃ³cios a partir de bases de dados ou arquivos CSV.

## ğŸš€ Funcionalidades

- **Upload de Dados**: Suporte para arquivos CSV e SQL dumps
- **AnÃ¡lise Inteligente**: Utiliza Google Gemini para anÃ¡lise avanÃ§ada
- **Insights de NegÃ³cios**: Gera resumos e insights estratÃ©gicos
- **API RESTful**: Interface simples via FastAPI
- **Processamento de SQL**: Analisa estrutura de tabelas e dados

## ğŸ“‹ PrÃ©-requisitos

- Python 3.8+
- Chave de API do Google Gemini
- DependÃªncias do requirements.txt

## ğŸ› ï¸ InstalaÃ§Ã£o

1. **Clone o repositÃ³rio**
```bash
git clone <seu-repositorio>
cd RCS-SmartBI-Assistant-backend
```

2. **Instale as dependÃªncias**
```bash
pip install -r requirements.txt
```

3. **Configure as variÃ¡veis de ambiente**
```bash
cp .env.example .env
# Edite o arquivo .env e adicione sua GEMINI_API_KEY
```

4. **Execute o servidor**
```bash
python main.py
```

## ğŸ”§ ConfiguraÃ§Ã£o

### VariÃ¡veis de Ambiente (.env)

```env
GEMINI_API_KEY=sua_chave_da_api_gemini_aqui
PORT=8000
HOST=0.0.0.0
ENVIRONMENT=development
```

### Como obter a chave da API Gemini

1. Acesse [Google AI Studio](https://makersuite.google.com/app/apikey)
2. FaÃ§a login com sua conta Google
3. Clique em "Create API Key"
4. Copie a chave gerada e cole no arquivo `.env`

## ğŸ“¡ Endpoints da API

### ğŸ“‹ InformaÃ§Ãµes da API
```http
GET /
```

### ğŸ“Š Upload e AnÃ¡lise de Dados
```http
POST /upload
Content-Type: multipart/form-data

Form Data:
- file: arquivo CSV ou SQL
```

**Exemplo de resposta:**
```json
{
  "success": true,
  "message": "AnÃ¡lise concluÃ­da com sucesso",
  "file_info": {
    "filename": "dados.csv",
    "size": 1024,
    "type": "csv"
  },
  "analysis": {
    "business_summary": "Resumo executivo dos dados...",
    "strategic_insights": [
      "Insight estratÃ©gico 1",
      "Insight estratÃ©gico 2"
    ],
    "recommendations": [
      "RecomendaÃ§Ã£o 1",
      "RecomendaÃ§Ã£o 2"
    ]
  },
  "gemini_response": "Resposta completa do Gemini..."
}
```

## ğŸ¯ Tipos de Arquivo Suportados

### CSV
- Arquivos com dados tabulares
- Separador: vÃ­rgula (,) ou ponto-e-vÃ­rgula (;)
- Encoding: UTF-8

### SQL
- Dumps de banco de dados
- Comandos CREATE TABLE e INSERT
- Suporte para MySQL e PostgreSQL

## ğŸ“– Exemplo de Uso

### Via cURL
```bash
curl -X POST "http://localhost:8000/upload" \
     -H "accept: application/json" \
     -H "Content-Type: multipart/form-data" \
     -F "file=@dados.csv"
```

### Via Python
```python
import requests

url = "http://localhost:8000/upload"
files = {"file": open("dados.csv", "rb")}
response = requests.post(url, files=files)
print(response.json())
```

## ğŸ§  Prompt do Gemini

O sistema utiliza o seguinte prompt para anÃ¡lise:

```
Analise o SQL/CSV que vocÃª enviou (estrutura das tabelas, inserts, dados) e traga um resumo em linguagem de negÃ³cios.

Depois, com base nisso, gerar insights estratÃ©gicos para tomada de decisÃµes e tbm leve em conta os registros.

DÃª apenas insights, nÃ£o fale mais coisas adicionais. NÃ£o precisa dizer nada tÃ©cnico relacionado a Principais Entidades e Relacionamentos.
```

## ğŸ“Š Estrutura do Projeto

```
RCS-SmartBI-Assistant-backend/
â”œâ”€â”€ main.py                 # Servidor FastAPI principal
â”œâ”€â”€ gemini_analyzer.py      # MÃ³dulo de anÃ¡lise com Gemini
â”œâ”€â”€ data_processor.py       # Processamento de dados
â”œâ”€â”€ requirements.txt        # DependÃªncias
â”œâ”€â”€ .env.example           # Exemplo de configuraÃ§Ã£o
â”œâ”€â”€ temp/                  # Arquivos temporÃ¡rios
â””â”€â”€ README.md              # Este arquivo
```

## ğŸ” Monitoramento e Logs

O sistema registra automaticamente:
- Uploads de arquivos
- Chamadas para a API Gemini
- Erros e exceÃ§Ãµes
- Tempo de processamento

## ğŸ›¡ï¸ SeguranÃ§a

- ValidaÃ§Ã£o de tipos de arquivo
- Limite de tamanho de upload
- SanitizaÃ§Ã£o de conteÃºdo SQL
- Limpeza automÃ¡tica de arquivos temporÃ¡rios

## ğŸ“ˆ Performance

- Processamento assÃ­ncrono
- Cache de resultados (em desenvolvimento)
- Limite de tamanho de arquivo: 50MB

## ğŸš€ Deploy

### Desenvolvimento
```bash
python main.py
```

### ProduÃ§Ã£o
```bash
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

### Docker (em desenvolvimento)
```bash
docker build -t smartbi-backend .
docker run -p 8000:8000 --env-file .env smartbi-backend
```

## ğŸ¤ ContribuiÃ§Ã£o

1. FaÃ§a fork do projeto
2. Crie uma branch para sua feature
3. Commit suas mudanÃ§as
4. Push para a branch
5. Abra um Pull Request

## ğŸ“ LicenÃ§a

Este projeto estÃ¡ sob a licenÃ§a MIT. Veja o arquivo LICENSE para mais detalhes.

## ğŸ†˜ Suporte

Para suporte e dÃºvidas:
- Abra uma issue no GitHub
- Entre em contato pelo email: [seu-email]

## ğŸ”„ Changelog

### v2.0.0 (Atual)
- IntegraÃ§Ã£o com Google Gemini
- RemoÃ§Ã£o de modelos ML prÃ³prios
- Foco em insights de negÃ³cios
- API simplificada

### v1.0.0
- Pipeline de ML bÃ¡sico
- AnÃ¡lise com modelos prÃ³prios
