#!/usr/bin/env python3
import os
import sys
import asyncio
from dotenv import load_dotenv

# Carrega .env
load_dotenv()

def test_api_key():
    print("ğŸ”‘ Testando API Key do Gemini...")
    
    # Pega a API key
    api_key = os.getenv("GEMINI_API_KEY")
    if not api_key:
        print("âŒ GEMINI_API_KEY nÃ£o encontrada")
        return False
    
    print(f"âœ… API Key encontrada: {api_key[:20]}...")
    
    try:
        import google.generativeai as genai
        genai.configure(api_key=api_key)
        
        model = genai.GenerativeModel('gemini-1.5-flash')
        response = model.generate_content("Test connection")
        
        print("âœ… ConexÃ£o com Gemini funcionando!")
        print(f"ğŸ“ Resposta: {response.text[:50]}...")
        return True
        
    except Exception as e:
        print(f"âŒ Erro na conexÃ£o: {e}")
        return False

if __name__ == "__main__":
    success = test_api_key()
    sys.exit(0 if success else 1)
